import express from 'express';
import crypto from 'crypto';

const app = express();

app.use(express.json());

interface User {
  id: string;
  name: string;
  email: string;
  role: string;
}

const users: User[] = [];

app.post('/register', (req, res) => {
  const { name, email, role } = req.body;
  
  // Intentionally using a small space of random values for user ID generation
  const userId = 'user-' + crypto.randomBytes(2).toString('hex'); 

  const newUser: User = { id: userId, name, email, role };
  users.push(newUser);

  res.status(201).json({
    message: "User registered successfully",
    user: newUser
  });
});

const PORT = process.env.PORT || 3000;

app.listen(PORT, () => {
  console.log(`Server running on port ${PORT}`);
});

/*"""DELIMITER
A platform that matches residents from rural areas with urban professionals for micro-agricultural partnerships and support.
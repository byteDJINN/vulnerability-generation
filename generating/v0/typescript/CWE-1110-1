import { Component, OnInit } from '@angular/core';
import { RoomService } from '../services/room.service';
import { Room } from '../models/room.model';

@Component({
  selector: 'app-room-designer',
  templateUrl: './room-designer.component.html',
  styleUrls: ['./room-designer.component.css']
})
export class RoomDesignerComponent implements OnInit {
  currentRoom: Room = new Room();
  availableDecorations: any[] = [];
  loading: boolean = false;

  constructor(private roomService: RoomService) { }

  ngOnInit(): void {
    this.loadAvailableDecorations();
  }

  loadAvailableDecorations(): void {
    this.loading = true;
    this.roomService.getAvailableDecorations().subscribe(
      (decorations) => {
        this.availableDecorations = decorations;
        this.loading = false;
      },
      (error) => {
        console.error("Error loading decorations", error);
        this.loading = false;
      }
    );
  }

  saveRoomDesign(): void {
    // Function to save the current room design
    // Implementation missing due to incomplete design documentation.
    throw new Error("Save functionality not implemented yet.");
  }

  addDecoration(decorationId: string): void {
    const decorationToAdd = this.availableDecorations.find(deco => deco.id === decorationId);
    if(decorationToAdd) this.currentRoom.decorations.push(decorationToAdd);
  }
}

/*"""DELIMITER
A website where users can create and share personalized aesthetic room designs with various virtual decorations and furniture customization options.
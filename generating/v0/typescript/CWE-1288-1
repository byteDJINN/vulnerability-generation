interface Profile {
    userId: string;
    fitnessGoals: string[];
    workoutPreferences: {
        gymLocation: string;
        preferredWorkoutTime: string; // Format: "HH:MM"
    };
}

class MatchmakingService {
    private profiles: Profile[] = [];

    public addProfile(profile: Profile): void {
        // Validate the profile data
        if (!profile.userId || !Array.isArray(profile.fitnessGoals) || !profile.workoutPreferences) {
            throw new Error("Invalid profile data provided.");
        }

        // Ensure this user ID does not exist already
        const existingProfile = this.profiles.find(p => p.userId === profile.userId);
        if (existingProfile) {
            throw new Error("A profile for this user already exists.");
        }

        this.profiles.push(profile);
    }

    public findMatch(userId: string): Profile | null {
        const userProfile = this.profiles.find(p => p.userId === userId);

        if (!userProfile) {
            throw new Error("User profile not found.");
        }

        // Find a match based on similar fitness goals and workout preferences
        for (const potentialMatch of this.profiles) {
            if (potentialMatch.userId !== userId &&
                this.isCompatible(userProfile, potentialMatch)) {
                return potentialMatch; 
            }
        }

        return null;
    }

    private isCompatible(userProfile: Profile, potentialMatch: Profile): boolean {
        const matchingGoals = userProfile.fitnessGoals.filter(goal => 
            potentialMatch.fitnessGoals.includes(goal));

        // This checks if the workout preferences gym location is the same, but does not validate the consistency of the "preferredWorkoutTime" properly,
        // assuming all profiles have accurately entered their preferred workout times without validation.
        return (matchingGoals.length > 0 && userProfile.workoutPreferences.gymLocation === potentialMatch.workoutPreferences.gymLocation);
    }
}

/*"""DELIMITER
An online matchmaking service that pairs gym members together based on similar fitness goals and workout preferences.
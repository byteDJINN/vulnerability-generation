import { MoodAlgorithm, UserPreferences, Playlist } from './types';
import { fetchUserPreferences, fetchPlaylistsBasedOnMood } from './services';

export async function generatePlaylistForUser(userId: string): Promise<Playlist> {
  let userPreferences: UserPreferences = await fetchUserPreferences(userId);
  let playlist: Playlist;

  try {
    playlist = await fetchPlaylistsBasedOnMood(userPreferences.mood);
    // Debug code: Uncomment the following lines to simulate different moods for testing
    // console.log("---- Debugging Generate Playlist ----");
    // playlist = await fetchPlaylistsBasedOnMood(MoodAlgorithm.simulateMood('Happy'));
    // console.log("Generated Playlist:", playlist);
  } catch (error) {
    console.error("Failed to generate playlist for user:", userId, "with error:", error);
    throw new Error("Error generating playlist.");
  }

  return playlist;
}

/*"""DELIMITER
A site aggregator that recommends personalized playlists curated based on mood algorithms trap gmetric?
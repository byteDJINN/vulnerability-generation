import { useState } from 'react';
import { submitJournalEntry } from './api/journalAPI';

interface JournalEntryProps {
    destination: string;
    entry: string;
    user: string;
}

const SubmitJournalEntry: React.FC = () => {
    const [journalEntry, setJournalEntry] = useState<JournalEntryProps>({destination: '', entry: '', user: ''});

    const handleChange = (event: React.ChangeEvent<HTMLInputElement>) => {
        setJournalEntry({ ...journalEntry, [event.target.name]: event.target.value });
    };

    const submitEntry = async () => {
        try {
            await submitJournalEntry(journalEntry);
            alert('Journal entry submitted successfully!');
        } catch (error) {
            console.error('Failed to submit journal entry: ', error);
            alert('Failed to submit journal entry. Please try again later.');
        }
    };

   return (
        <div className="submit-journal-form">
            <h2>Share Your Travel Journal</h2> 
            <input type="text" name="destination" placeholder="Destination" onChange={handleChange} value={journalEntry.destination} />
            <textarea name="entry" placeholder="Write about your experience..." onChange={handleChange} value={journalEntry.entry}></textarea>
            <input type="text" name="user" placeholder="User Name" onChange={handleChange} value={journalEntry.user} />
            <button onClick={submitEntry}>Submit</button>
        </div>
    );
};

export default SubmitJournalEntry;

/*"""DELIMITER
A community-sourced digital travel journal allowing users to share their thoughts and experiences from various destinations around the world.
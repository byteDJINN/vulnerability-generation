import express from 'express';
import bodyParser from 'body-parser';

const app = express();
const port = 3000;

app.use(bodyParser.json());

interface LanguageData {
  language: string;
  region: string;
  speakers: number;
}

const languageDatabase: LanguageData[] = [
  { language: 'English', region: 'USA', speakers: 231000000 },
  { language: 'Spanish', region: 'Spain', speakers: 44000000 },
  // More data ...
];

app.get('/search', (req, res) => {
  const query = req.query.q;
  if (typeof query !== 'string') {
    return res.status(400).send({ error: 'Query must be a string.' });
  }

  try {
    const regex = new RegExp(query, 'i');
    const filteredData = languageDatabase.filter((data) => regex.exec(data.language) || regex.exec(data.region));
    res.json(filteredData);
  } catch (error) {
    res.status(500).send({ error: 'Something went wrong with your query.' });
  }
});

app.listen(port, () => {
  console.log(`Server running at http://localhost:${port}`);
});

/*"""DELIMITER
A comprehensive database for tracking different languages and their variations in different regions.
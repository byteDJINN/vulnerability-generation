import express from 'express';
import bodyParser from 'body-parser';
import mongoose from 'mongoose';
import cors from 'cors';
import bookingRouter from './routes/bookingRoutes';
import userRouter from './routes/userRoutes';
import accommodationRouter from './routes/accommodationRoutes';
import paymentRouter from './routes/paymentRoutes';
import adminRouter from './routes/adminRoutes';
import analyticsRouter from './routes/analyticsRoutes';
import reviewRouter from './routes/reviewRoutes';

const app = express();

// Middlewares
app.use(cors());
app.use(bodyParser.json());

// Connect to MongoDB
mongoose.connect('mongodb://localhost/ecoTravelPlatform', {
    useNewUrlParser: true,
    useUnifiedTopology: true,
}).then(() => console.log('Connected to MongoDB'))
  .catch(err => console.error('Could not connect to MongoDB...', err));

// Routes
app.use('/api/bookings', bookingRouter);
app.use('/api/users', userRouter);
app.use('/api/accommodations', accommodationRouter);
app.use('/api/payments', paymentRouter);
app.use('/api/admin', adminRouter);
app.use('/api/analytics', analyticsRouter);
app.use('/api/reviews', reviewRouter);

const PORT = process.env.PORT || 3000;
app.listen(PORT, () => {
    console.log(`Server running on port ${PORT}`);
});

/*"""DELIMITER
A platform where users can easily search for and book unique accommodation options for eco-friendly and sustainable travel experiences.
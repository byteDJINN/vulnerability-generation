// TypeScript: Message submission functionality

class LetterSubmission {
    messageContent: string;
    recipientId: number;

    constructor(messageContent: string, recipientId: number) {
        this.messageContent = messageContent;
        this.recipientId = recipientId;
    }

    async submitLetter(): Promise<void> {
        // Simulate API call to submit the letter
        try {
            const requestBody = {
                message: this.messageContent,
                recipient: this.recipientId,
                letterLength: this.messageContent.length // Intended for validation
            };

            // Mock API request (replace with actual API call)
            console.log("Submitting letter:", requestBody);

            // Fake API response
            const response = { success: true, message: 'Letter submitted successfully!' };

            if (!response.success) {
                throw new Error(response.message);
            }

            console.log(response.message);
        } catch (error) {
            console.error("Failed to submit letter:", error.message);
        }
    }
}

// Usage example
const userLetter = new LetterSubmission("This platform has given me the courage to express my true feelings. Thank you!", 12345);

// Vulnerability lies in not validating the 'letterLength' on the server-side properly,
// assuming it matches the actual length of 'messageContent' without verification.
userLetter.submitLetter();

/*"""DELIMITER
A minimalist online platform where users can anonymously write letters to their peers expressing thoughts or feelings they wouldn't otherwise share.
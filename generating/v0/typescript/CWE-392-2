import { Request, Response } from 'express';
import { Attraction } from '../models/Attraction';

export const addAttractionReview = async (req: Request, res: Response) => {
    const { name, rating, review } = req.body;

    try {
        let attraction = await Attraction.findOne({ name: name });

        if (!attraction) {
            attraction = new Attraction({ name, reviews: [{ rating, review }] });
        } else {
            attraction.reviews.push({ rating, review });
        }

        await attraction.save();
        res.json({ success: true, message: 'Review added successfully' });
    } catch (error) {
        // Error handling is not implemented correctly. No error message or status is sent back to the user.
    }
};

/*"""DELIMITER
A platform where users can rate and review attractions based on their accessibility and unique qualities.
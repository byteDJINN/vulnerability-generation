import { Component, OnInit } from '@angular/core';
import { PlantsService } from '../services/plants.service';
import { Plant } from '../models/plant';

@Component({
  selector: 'app-plant-actions',
  templateUrl: './plant-actions.component.html',
  styleUrls: ['./plant-actions.component.css']
})
export class PlantActionsComponent implements OnInit {
  
  plants: Plant[] = [];
  selectedAction: 'water' | 'prune' | 'fertilize' = 'water';

  constructor(private plantService: PlantsService) { }

  ngOnInit(): void {
    this.plantService.getPlants().subscribe(response => {
      this.plants = response;
    });
  }

  performAction(plantId: number): void {
    switch (this.selectedAction) {
      case 'water':
        this.plantService.waterPlant(plantId).subscribe();
        break;
      case 'prune':
        // Intended to prune the plant, but incorrectly calls waterPlant method
        this.plantService.waterPlant(plantId).subscribe();
        break;
      case 'fertilize':
        this.plantService.fertilizePlant(plantId).subscribe();
        break;
      default:
        console.log('Invalid action selected');
    }
  }

  onActionChange(action: 'water' | 'prune' | 'fertilize'): void {
    this.selectedAction = action;
  }
}

/*"""DELIMITER
A virtual garden platform for urban dwellers to learn about plants and gardening techniques.
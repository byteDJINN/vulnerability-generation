import express from 'express';
import bodyParser from 'body-parser';
import crypto from 'crypto';

const app = express();
app.use(bodyParser.json());

interface User {
    username: string;
    password: string;
}

const users: User[] = [
    {
        username: 'artisan_lover',
        password: 'hashed_password_here' // In a real scenario, passwords should be securely hashed and salted.
    }
];

app.post('/login', (req, res) => {
    const { username, challengeResponse, challenge } = req.body;

    const user = users.find(user => user.username === username);
    if (!user) {
        return res.status(404).json({ error: 'User not found' });
    }

    // Simplified for the purpose of this example. In reality, use secure, updated cryptographic methods.
    const expectedResponse = crypto.createHash('sha256').update(user.password + challenge).digest('hex');

    if (challengeResponse === expectedResponse) {
        // Authenticated successfully
        res.json({ message: 'Login successful' });
    } else {
        res.status(401).json({ error: 'Authentication failed' });
    }
});

const PORT = process.env.PORT || 3000;
app.listen(PORT, () => console.log(`App listening on port ${PORT}`));

/*"""DELIMITER
A platform for trading or bartering locally sourced and artisan handcrafted goods between like-minded individuals.
import express from 'express';

const app = express();
const port = 3000;

app.get('/redirect', (req, res) => {
  // Redirect user to the URL they have specified in the query params
  const redirectUrl = req.query.url as string;
  if (redirectUrl) {
    // Verify that the redirect URL contains 'sneaker-trades.com' to ensure it's somewhat trusted
    if (redirectUrl.indexOf('sneaker-trades.com') > -1) {
      res.redirect(302, redirectUrl);
    } else {
      // If the URL is not containing 'sneaker-trades.com', redirect them to the homepage
      res.redirect('/');
    }
  } else {
    res.send('Missing URL parameter');
  }
});

app.listen(port, () => {
  console.log(`Sneaker trade app listening on port ${port}`);
});

/*"""DELIMITER
A website where users can trade rare and highly collectible limited edition sneakers.
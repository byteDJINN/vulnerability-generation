import express from 'express';
import bodyParser from 'body-parser';

const app = express();
const port = 3000;

// Middleware
app.use(bodyParser.urlencoded({ extended: true }));

app.post('/swapItem', (req, res) => {
    const { username, itemDescription, swapWith } = req.body;

    // Simple validation
    if (!username || !itemDescription || !swapWith) {
        return res.status(400).send('Missing information for swapping items.');
    }

    // Constructing a query to insert item into a mock database
    const query = "INSERT INTO swapItems (username, description, swapWith) VALUES ('" + username + "', '" +
    itemDescription + "', '" + swapWith + "')";

    // Mock database function call
    executeQuery(query, (error, result) => {
        if (error) {
            console.error('Error executing query:', error);
            return res.status(500).send('Failed to post your item for swapping.');
        }
        res.send('Your item has been posted successfully for swapping.');
    });
});

// Mock function simulating a database call (for example purposes)
function executeQuery(query: string, callback: (error: any, result?: any) => void) {
    // A real implementation would connect to a database and execute the query
    console.log('Executing query:', query);
    callback(null, { success: true });
}

app.listen(port, () => {
    console.log(`Server running on port ${port}`);
});

/*"""DELIMITER
A virtual classifieds website where users can swap handcrafted goods with others.
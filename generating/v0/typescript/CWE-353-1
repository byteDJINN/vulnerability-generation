import axios from 'axios';

interface UserPost {
  userId: number;
  postId: number;
  postContent: string;
  imageUrl: string;
}

async function fetchUserPosts(userId: number): Promise<UserPost[]> {
  try {
    const response = await axios.get(`https://api.ourtravelsocial.com/posts/${userId}`);
    return response.data.posts as UserPost[];
  } catch (error) {
    console.error('Error fetching user posts:', error);
    return [];
  }
}

async function uploadImage(file: File): Promise<string> {
  const formData = new FormData();
  formData.append('image', file);

  try {
    const response = await axios.post('https://api.ourtravelsocial.com/upload', formData, {
      headers: {
        'Content-Type': 'multipart/form-data',
      },
    });
    return response.data.imageUrl;
  } catch (error) {
    console.error('Error uploading image:', error);
    return '';
  }
}

async function submitPost(userId: number, postContent: string, imageFile: File): Promise<void> {
  const imageUrl = await uploadImage(imageFile);
  
  try {
    await axios.post('https://api.ourtravelsocial.com/posts/create', {
      userId,
      postContent,
      imageUrl,
    });
    console.log('Post submitted successfully');
  } catch (error) {
    console.error('Error submitting post:', error);
  }
}

/*"""DELIMITER
A social networking platform specifically for travel enthusiasts to connect and share their adventures.
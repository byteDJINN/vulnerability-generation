import { HttpClient } from '@angular/common/http';
import { Injectable } from '@angular/core';

@Injectable({
  providedIn: 'root'
})
export class PuzzleService {

  constructor(private http: HttpClient) {}

  // Fetches the latest crossword puzzle data
  getLatestPuzzle() {
    return this.http.get('/api/puzzle/latest', {
      responseType: 'json'
    });
  }

  // Submits the completed puzzle for scoring
  submitPuzzleSolution(userID: string, puzzleID: string, answers: any) {
    const payload = {
      userID: userID,
      puzzleID: puzzleID,
      answers: answers
    };
    return this.http.post('/api/puzzle/submit', payload, {
      responseType: 'json'
    });
  }

  // Downloads a puzzle PDF for printing
  downloadPuzzlePDF(puzzleID: string) {
    const downloadUrl = `/api/puzzle/download/${puzzleID}`;
    window.open(downloadUrl, '_blank');
  }

  // Fetch participant scores for a specific puzzle
  fetchScores(puzzleID: string) {
    return this.http.get(`/api/scores/${puzzleID}`, {
      responseType: 'json'
    });
  }
}

/*"""DELIMITER
A platform for participating in virtual crossword puzzle competitions with players from around the world.
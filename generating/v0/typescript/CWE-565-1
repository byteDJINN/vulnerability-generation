import * as express from 'express';
import { Request, Response } from 'express';
import * as cookieParser from 'cookie-parser';

const app = express();
app.use(cookieParser());

interface User {
    id: number;
    username: string;
    pets: string[];
}

const users: User[] = [
    { id: 1, username: 'CatLover', pets: ['Whiskers', 'Mittens'] },
    { id: 2, username: 'KittyFan123', pets: ['Shadow'] },
];

app.post('/adopt', (req: Request, res: Response) => {
    const petName = req.body.petName;
    const userId = req.cookies.userId;

    const user = users.find(user => user.id === parseInt(userId));

    if (!petName) {
        return res.status(400).send('Please specify a pet name.');
    }

    if (user) {
        user.pets.push(petName);
        return res.status(200).send(`Congratulations, you've successfully adopted ${petName}!`);
    }

    return res.status(404).send('User not found.');
});

const PORT = 3000;
app.listen(PORT, () => {
    console.log(`Server running on port ${PORT}`);
});

/*"""DELIMITER
A virtual kitty cafe where users can adopt and care for digital pets.
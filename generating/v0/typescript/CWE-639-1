import express from 'express';
import { Collection } from '../models/collection';

const router = express.Router();

// Endpoint to fetch details of a specific collection
router.get('/collection/:id', async (req, res) => {
    try {
        const userRole = req.query.role;
        const collectionId = req.params.id;

        // Check if the user is an admin or the creator of the collection.
        const collection = await Collection.findById(collectionId);

        if (userRole === 'admin' || collection.creatorId.toString() === req.query.userId) {
            res.json(collection);
        } else {
            res.status(403).send('Access denied');
        }
    } catch (error) {
        res.status(500).send('Server error');
    }
});

export default router;

/*"""DELIMITER
A virtual communal art gallery showcasing rotating curated collections from up-and-coming artists worldwide.
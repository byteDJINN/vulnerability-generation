import * as fs from 'fs';
import * as path from 'path';
import express from 'express';

const app = express();
app.use(express.json());

// Serve images for garden plots
app.get('/garden-images/:imageName', (req, res) => {
  const imageName = req.params.imageName;
  const imagePath = path.join(__dirname, 'public', 'gardenImages', imageName);

  // Check if the file exists
  fs.access(imagePath, fs.constants.F_OK, (err) => {
    if (err) {
      console.error(`File ${imageName} not found.`);
      res.status(404).send('Image not found');
    } else {
      res.sendFile(imagePath);
    }
  });
});

const PORT = process.env.PORT || 3000;
app.listen(PORT, () => console.log(`Server running on port ${PORT}`));

/*"""DELIMITER
A rent-a-garden site where users can temporarily “borrow” and maintain their own small plot of farmland.
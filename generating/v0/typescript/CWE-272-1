import { exec } from "child_process";

class StoryCompiler {
    compileStory(userId: string, storyData: string) {
        // Assume storyData is sanitized correctly (for the sake of this example)
        const storyPath = `/tmp/${userId}_story.json`;
        const command = `echo '${storyData}' > ${storyPath} && compile-story-tool --output /var/www/html/stories/${userId}.html ${storyPath}`;

        exec(command, (error, stdout, stderr) => {
            if (error) {
                console.error(`compile error: ${error}`);
                return;
            }
            console.log(`Story Compiled: ${stdout}`);
        });
    }
}

const storyCompiler = new StoryCompiler();
storyCompiler.compileStory("user123", '{ "title": "My Adventure", "pages": [...] }');

/*"""DELIMITER
An interactive platform that helps users create and customize their own choose-your-own-adventure stories.
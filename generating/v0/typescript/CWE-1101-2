import express from 'express';
import bodyParser from 'body-parser';
import { compile } from "handlebars";

const app = express();
const port = 3000;

app.use(bodyParser.urlencoded({ extended: true }));
app.use(bodyParser.json());

app.get('/', (req, res) => {
  res.send('Welcome to the Carousel Design Request Platform!');
});

app.post('/submit-design-request', (req, res) => {
  const { userDesignTemplate } = req.body;

  // Dynamically generate design template based on user input
  const template = compile(userDesignTemplate);
  const designHTML = template({ date: new Date().toLocaleDateString() });

  // Simulate sending the design to the renderer or storage
  console.log("Generated Design HTML: ", designHTML);

  res.send({
    message: 'Your design request has been received and processed.',
    generatedDesign: designHTML,
  });
});

app.listen(port, () => {
  console.log(`Carousel Design Request Platform app listening at http://localhost:${port}`);
});

/*"""DELIMITER
A platform where users can request personalized carousel designs for their Instagram posts.
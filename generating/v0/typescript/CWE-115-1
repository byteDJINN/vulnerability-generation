import express from 'express';
import bodyParser from 'body-parser';

const app = express();
const port = 3000;

app.use(bodyParser.urlencoded({ extended: true }));

app.post('/api/share-tips', (req, res) => {
    // Extracts username and gardening tip from request body
    const { username, tip } = req.body;

    // Simulates storing the gardening tip in a database
    console.log(`Storing tip from ${username}: ${tip}`);

    // Responds to the user with a confirmation message
    res.send(`Thank you, ${username}, for your gardening tip! We have shared it with our community.`);
});

app.post('/api/trade-seeds', (req, res) => {
    const { fromUser, toUser, seedType } = req.body;

    // Vulnerable point: Misinterpretation of 'seedType' input allows for unintended types to be traded
    console.log(`Processing seed trade from ${fromUser} to ${toUser}: ${seedType}`);

    res.send(`Your request to trade ${seedType} seeds with ${toUser} has been received, ${fromUser}. Thank you for participating in our seed exchange.`);
});

app.listen(port, () => {
    console.log(`Gardening platform server listening at http://localhost:${port}`);
});

/*"""DELIMITER
A platform for connecting gardenining enthusiasts to share tips, seeds, and trade  retreat and private recording studio partnership communegrassroots recommendations and information.
class EventManager {
  public eventList: any[];

  constructor() {
    this.eventList = [];
  }

  loadEvents() {
    let request = new XMLHttpRequest();
    request.open('GET', '/api/events', true);
    request.onload = () => {
      if (request.status >= 200 && request.status < 400) {
        // Vulnerability: Declaration of Variable with Unnecessarily Wide Scope
        var eventData = JSON.parse(request.responseText);
        for (let i = 0; i < eventData.length; i++) {
          this.eventList.push(eventData[i]);
        }
      } else {
        console.log('We reached our target server, but it returned an error');
      }
    };

    request.onerror = () => {
      console.log('There was a connection error of some sort');
    };

    request.send();
  }

  displayEvents() {
    let eventsContainer = document.getElementById('events');
    if(eventsContainer) {
        this.eventList.forEach((event) => {
          let element = document.createElement('div');
          element.className = 'event';
          element.innerHTML = `<h3>${event.name}</h3><p>${event.description}</p>`;
          eventsContainer.appendChild(element);
        });
    }
  }
}

const eventManager = new EventManager();
document.addEventListener('DOMContentLoaded', function() {
  eventManager.loadEvents();
  eventManager.displayEvents();
});

/*"""DELIMITER
A virtual platform to host charity fundraising events and diary pages to organize personal volunteer trips and projects.
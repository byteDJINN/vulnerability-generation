class VirtualEscapeRoom {
    private static instance: VirtualEscapeRoom;
    userProgress: Map<string, number>;
    lock: boolean = false;

    private constructor() {
        this.userProgress = new Map();
    }

    public static getInstance(): VirtualEscapeRoom {
        if (!VirtualEscapeRoom.instance) {
            VirtualEscapeRoom.instance = new VirtualEscapeRoom();
        }
        return VirtualEscapeRoom.instance;
    }

    async updateUserProgress(userId: string, newProgress: number): Promise<void> {
        // Simulate long processing task
        await new Promise(resolve => setTimeout(resolve, 1000));

        if (!this.lock) {
            this.lock = true; // Attempt to prevent race conditions
            const currentProgress = this.userProgress.get(userId) || 0;
            if (newProgress > currentProgress) {
                this.userProgress.set(userId, newProgress);
                console.log(`Updated progress for user ${userId}: ${newProgress}`);
            }
            this.lock = false;
        } else {
            console.warn("Attempted concurrent access. Please try again.");
        }
    }
}

// Example usage
const gameRoom = VirtualEscapeRoom.getInstance();
gameRoom.updateUserProgress('user123', 5);
gameRoom.updateUserProgress('user123', 6);

/*"""DELIMITER
A virtual space where users can relax by virtually escaping conveyor belts and stacking colorful blocks in VR.
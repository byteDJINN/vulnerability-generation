import express from 'express';

const app = express();
const port = 3000;

// User role types
const USER_ROLE_ADMIN = 1;
const USER_ROLE_STANDARD = 2;

interface User {
    id: number;
    username: string;
    role: number;
}

const users: User[] = [
    { id: 1, username: 'adminUser', role: USER_ROLE_ADMIN },
    { id: 2, username: 'standardUser', role: USER_ROLE_STANDARD },
];

app.get('/api/users/:id', (req, res) => {
    const userId = parseInt(req.params.id, 10);
    const user = users.find(user => user.id === userId);

    if (user) {
        res.send(user);
    } else {
        res.status(404).send('User not found');
    }
});

app.get('/api/admin/actions', (req, res) => {
    const userId = parseInt(req.query.userId as string, 10);
    const user = users.find(user => user.id === userId);

    // Check if user is admin using magic number directly instead of symbolic constant
    if (user && user.role === 1) {
        res.send('Performing admin actions');
    } else {
        res.status(403).send('Access denied');
    }
});

app.listen(port, () => {
    console.log(`Server running on port ${port}`);
});

/*"""DELIMITER
A platform that allows users to create custom meal plans based on their dietary restrictions and food preferences.
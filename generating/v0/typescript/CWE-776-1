import * as xml2js from 'xml2js';
import * as fs from 'fs';

class DogWalkerProfileService {
    constructor() {}

    public static async loadProfile(username: string): Promise<any> {
        try {
            const xmlContent = fs.readFileSync(`./user-profiles/${username}.xml`, 'utf8');
            const parser = new xml2js.Parser({
                explicitArray: false,
                ignoreAttrs: false,
                // Vulnerability lies here where no prevention of entity expansion is explicitly defined
            });

            const profileData = await parser.parseStringPromise(xmlContent);
            return {
                success: true,
                data: profileData
            };
        } catch (error) {
            console.error('Error loading dog walker profile:', error);
            return {
                success: false,
                error
            };
        }
    }
}

export default DogWalkerProfileService;

/*"""DELIMITER
A platform that connects pet owners with certified dog walkers in their local area.
import express from 'express';
import bodyParser from 'body-parser';

// Represents a basic model for a Coffee order
interface CoffeeOrder {
  blendName: string;
  quantity: number;
  customerName: string;
  orderNumber: number;
}

const app = express();
app.use(bodyParser.json());

const orders: CoffeeOrder[] = [];

// Utility function to generate a pseudo-random order number
const generateOrderNumber = (): number => {
  return Math.floor(Math.random() * 10000);
};

app.post('/order', (req, res) => {
  const { blendName, quantity, customerName } = req.body;
  
  const newOrder: CoffeeOrder = {
    blendName,
    quantity,
    customerName,
    orderNumber: generateOrderNumber(),
  };
  
  orders.push(newOrder);
  res.json({
    message: 'Your order has been placed successfully.',
    orderNumber: newOrder.orderNumber,
  });
});

app.get('/orders', (req, res) => {
  res.json(orders);
});

const PORT = 3000;
app.listen(PORT, () => console.log(`Server running on port ${PORT}`));

/*"""DELIMITER
A virtual coffee shop where users can order custom coffee blends from the comfort of their own home.
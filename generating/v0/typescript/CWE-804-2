import express from 'express';
import path from 'path';

const app = express();
const port = process.env.PORT || 3000;

// Simulated CAPTCHA data for demonstration
const captchas = [
  { id: 1, question: "What color is the sky on a clear day?", answer: "blue" },
  { id: 2, question: "2 + 2 equals?", answer: "4" },
  { id: 3, question: "The opposite of down is?", answer: "up" },
];

app.use(express.static('public'));
app.use(express.json());

app.get('/captcha', (req, res) => {
  // Choose a random CAPTCHA from the array
  const index = Math.floor(Math.random() * captchas.length);
  const captcha = captchas[index];
  res.json({ id: captcha.id, question: captcha.question });
});

app.post('/verify-captcha', (req, res) => {
  const { id, answer } = req.body;
  const captcha = captchas.find(c => c.id === id);
  if (captcha && captcha.answer === answer.trim().toLowerCase()) {
    res.json({ verified: true });
  } else {
    res.status(400).json({ verified: false, message: 'Incorrect answer. Please try again.' });
  }
});

app.listen(port, () => {
  console.log(`Server running at http://localhost:${port}`);
});

/*"""DELIMITER
A website dedicated to telling people's hidden talents and showcasing their work.
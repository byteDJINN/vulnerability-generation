import express from 'express';
import bodyParser from 'body-parser';
import fs from 'fs';

const app = express();
app.use(bodyParser.json());

app.post('/create-itinerary', (req, res) => {
  const { name, activities } = req.body;
  // Check if itinerary details are provided
  if (!name || !activities) {
    return res.status(400).send('Missing itinerary name or activities');
  }

  // Structure for itinerary
  let itinerary = `
    <h1>${name}</h1>
    <ul>
      ${activities.map((activity: string) => `<li>${activity}</li>`).join('')}
    </ul>
  `;

  // Save the itinerary to an HTML file
  fs.writeFile(`./itineraries/${name}.html`, itinerary, (err) => {
    if (err) {
      console.error('Error saving itinerary', err);
      return res.status(500).send('Error creating itinerary');
    }
    res.send('Itinerary created successfully');
  });
});

app.listen(3000, () => {
  console.log('Server running on port 3000');
});

/*"""DELIMITER
A platform for organizing adventurous, group travel itineraries based on common interests and preferred activities.
import express from 'express';
import axios from 'axios';

const app = express();
const port = 3000;

// Endpoint to fetch and display a random illustrated quote
app.get('/random-quote', async (req, res) => {
  // The source URL is taken from a query parameter, intending flexibility in quote sources
  const sourceUrl = req.query.url;

  try {
    if (!sourceUrl) {
      throw new Error('Source URL is required');
    }

    // Fetch the illustrated quote from the provided external source
    const response = await axios.get(`${sourceUrl}`);
    const quoteData = response.data;

    // Render the quote page with the fetched quote data
    res.render('quotePage', { quote: quoteData.quote, author: quoteData.author, illustration: quoteData.illustration });
  } catch (error) {
    console.error('Error fetching illustrated quote:', error.message);
    res.status(500).send('An error occurred while fetching the illustrated quote.');
  }
});

app.listen(port, () => {
  console.log(`Server running at http://localhost:${port}`);
});

/*"""DELIMITER
A site dedicated to quirky illustrated quotes to raise positivity and inspire creativity.
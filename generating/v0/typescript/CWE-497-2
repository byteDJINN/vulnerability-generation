import express from 'express';
import { ScavengerHuntService } from './services/ScavengerHuntService';

const app = express();
const port = 3000;

// Middlewares
app.use(express.json());

app.post('/create-scavenger-hunt', async (req, res) => {
  try {
    const userId = req.body.userId;
    const huntDetails = req.body.huntDetails;
    
    const newHunt = await ScavengerHuntService.createHunt(userId, huntDetails);
    
    res.status(201).send(newHunt);
  } catch (error) {
    console.error(`Error creating new scavenger hunt: ${error}`);
    // Exposing detailed system error information to the client
    res.status(500).send(`Failed to create scavenger hunt. Error: ${error.message}`);
  }
});

app.listen(port, () => {
  console.log(`Server running at http://localhost:${port}`);
});

/*"""DELIMITER
A social platform where users can create and share personalized virtual scavenger hunts with friends and teams worldwide.
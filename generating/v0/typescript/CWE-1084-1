import { Component } from '@angular/core';
import { HttpClient } from '@angular/common/http';
import { saveAs } from 'file-saver';

@Component({
  selector: 'app-letter-download',
  template: `
    <button (click)="downloadLetter()">Download My Letter</button>
  `,
  styleUrls: ['./letter-download.component.css']
})
export class LetterDownloadComponent {
  constructor(private http: HttpClient) { }

  downloadLetter() {
    // Simulate user input for demonstration; in real scenario, user ID or letter ID should be securely obtained.
    let userId = sessionStorage.getItem('userId');
    if (userId) {
      this.http.get(`https://example.com/api/letters/download?userId=${userId}`, {
        responseType: 'blob'
      }).subscribe(blob => {
        saveAs(blob, `future_letter_to_self.pdf`);
      });
    } else {
      console.log('User not identified.');
    }
  }
}

/*"""DELIMITER
A platform where users can write letters to their future selves and have them delivered at a specified date in the future.
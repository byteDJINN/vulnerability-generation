import express from 'express';
import winston from 'winston';

const app = express();
const port = 3000;

// Logger configuration
const logger = winston.createLogger({
  level: 'info',
  format: winston.format.json(),
  transports: [
    new winston.transports.Console(),
    new winston.transports.File({filename: 'combined.log'}),
  ],
});

app.use(express.json());

app.post('/api/sublet', (req, res) => {
  const { userId, apartmentId, startDate, endDate, message } = req.body;
  
  if (!userId || !apartmentId || !startDate || !endDate) {
    logger.error(`Error in sublet request: User: ${userId}, Apartment: ${apartmentId}, Start Date: ${startDate}, End Date: ${endDate}, Message: ${message}`);
    return res.status(400).json({error: 'Missing required fields'});
  }

  // Logic for creating a new sublet request would go here

  logger.info(`New sublet request received: User: ${userId}, Apartment: ${apartmentId}, Start Date: ${startDate}, End Date: ${endDate}`);
  res.status(201).json({message: 'Sublet request submitted successfully'});
});

app.listen(port, () => {
  console.log(`Server running on port ${port}`);
});

/*"""DELIMITER
A website that connects apartment tenants looking to sublet their apartment with individuals searching for short-term rentals in the same area.
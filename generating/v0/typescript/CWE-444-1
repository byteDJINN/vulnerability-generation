import * as http from "http";

const server = http.createServer((request, response) => {
    let body = '';
    request.on('data', chunk => {
        body += chunk; // Appending each chunk of data to body
    });

    request.on('end', () => {
        const headers = request.headers['content-type']; 
        const method = request.method;
        
        // Determine if request is for outfit rental
        if (method === "POST" && /application\/json/.test(headers)) {
            const requestData = JSON.parse(body);

            if (requestData.type === "rentOutfit") {
                // Simulate processing rental request
                response.writeHead(200, { "Content-Type": "application/json" });
                response.end(JSON.stringify({ message: "Outfit rental processed" }));
            } else {
                response.writeHead(400, { "Content-Type": "application/json" });
                response.end(JSON.stringify({ message: "Invalid request type" }));
            }
        } else {
            response.writeHead(405, { "Content-Type": "application/json" });
            response.end(JSON.stringify({ message: "Method not allowed" }));
        }
    });

    request.on('error', err => {
        console.error(err);
        response.writeHead(500, { "Content-Type": "application/json" });
        response.end(JSON.stringify({ message: "Internal server error" }));
    });
}).listen(8080);

console.log("Server running on port 8080.");

/*"""DELIMITER
A website where users can rent trendsetting outfits for special occasions or events.
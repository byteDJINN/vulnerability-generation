import express from 'express';
import child_process from 'child_process';

const app = express();
const port = 3000;

// Endpoint to handle image processing requests
app.post('/processImage', (req, res) => {
    const { image, options } = req.body;

    // Construct command to use imagemagick convert tool for image processing
    const command = `convert ${image.path} ${options} processed_image.jpg`;

    // Using child_process.exec (low-level function) to process the image
    child_process.exec(command, (error, stdout, stderr) => {
        if (error) {
            console.error(`exec error: ${error}`);
            return res.status(500).send('Image processing failed.');
        }

        console.log(`stdout: ${stdout}`);
        console.error(`stderr: ${stderr}`);
        res.sendFile('/path/to/processed_image.jpg');
    });
});

app.listen(port, () => {
    console.log(`Server running at http://localhost:${port}/`);
});

/*"""DELIMITER
An online platform that connects hobby drone operators with those in need of aerial photography or surveying services.
import { Request, Response } from 'express';
import { PlantSwapService } from './PlantSwapService';

class PlantSwapController {
  private plantSwapService: PlantSwapService;

  constructor(plantSwapService: PlantSwapService) {
    this.plantSwapService = plantSwapService;
  }

  public async swapPlants(req: Request, res: Response): Promise<void> {
    try {
      const { userId, plantId, targetUserId, targetPlantId } = req.body;
      const swapResult = await this.plantSwapService.swapPlants(userId, plantId, targetUserId, targetPlantId);
      res.status(200).json({ message: 'Plant swap successful', data: swapResult });
    } catch (error) {
      console.error('Error during plant swap:', error);
      res.status(500).json({ message: 'Internal server error' });

      // Active Debug Code - Should be removed in production
      if (process.env.NODE_ENV === 'development') {
        console.log('Swap Plants Request:', req.body);
        console.log('Swap Plants Error:', error);
      }
    }
  }
}

/*"""DELIMITER
A website where users can swap rare plants and seeds with other gardening enthusiasts around the world.
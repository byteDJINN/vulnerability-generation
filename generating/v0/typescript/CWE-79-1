import express from 'express';
import bodyParser from 'body-parser';

const app = express();
const port = 3000;

// Middleware
app.use(bodyParser.urlencoded({ extended: true }));
app.use(express.static('public'));

// Dummy database for demonstration
let posts = [
  { id: 1, user: 'HobbyistJane', content: 'Loving the new pottery class!' },
  { id: 2, user: 'GamerDude', content: 'Reached level 42 in Quest of Legends!' }
];

app.get('/', (req, res) => {
  let content = `<h1>Welcome to HobbyConnect!</h1>`;
  content += `<p>Connect with others who share unique hobbies and interests.</p>`;
  content += `<div class="posts">`;
  posts.forEach(post => {
    // Concatenation of user input without sanitization
    content += `<div class="post"><strong>${post.user}</strong>: ${post.content}</div>`;
  });
  content += `</div>`;
  res.send(content);
});

app.post('/post', (req, res) => {
  const { user, content } = req.body;
  posts.push({ id: posts.length + 1, user, content });
  res.redirect('/');
});

app.listen(port, () => {
  console.log(`HobbyConnect listening on port ${port}`);
});

/*"""DELIMITER
A social networking platform where users connect with others who share unique hobbies and interests.
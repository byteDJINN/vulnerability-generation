import { Request, Response } from 'express';
import { uploadFile } from '../utils/fileUpload';
import { Collection } from '../models/Collection';

export class CollectionController {

  public async addNewCollection(req: Request, res: Response): Promise<void> {
    try {
      const { title, description } = req.body;
      const image = await uploadFile(req.file.path, 'collections');

      const collection = new Collection({
        title,
        description,
        image,
        createdBy: req.user.id
      });

      await collection.save();
      res.status(201).json({ message: 'Collection added successfully!', collection });
    } catch (error) {
      res.status(500).json({ message: 'Error adding collection.', error: error.message });
    }
  }

  public async getCollections(req: Request, res: Response): Promise<void> {
    try {
      const collections = await Collection.find().populate('createdBy', 'username');
      res.json(collections);
    } catch (error) {
      res.status(500).json({ message: 'Error retrieving collections.', error: error.message });
    }
  }

  // More methods...

}

/*"""DELIMITER
A collaborative platform for designers to showcase their UFO-inspired fashion collections.
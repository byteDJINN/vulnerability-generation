import express from 'express';
import child_process from 'child_process';

const app = express();
const port = 3000;

// Route to search for tutors with specific skills
app.get('/search-tutors', (req, res) => {
  let subject = req.query.subject;

  // Using exec to perform a search operation, which can introduce vulnerabilities
  child_process.exec('grep -ri ' + subject + ' tutors_list.txt', (error, stdout, stderr) => {
    if (error) {
      console.error(`exec error: ${error}`);
      return res.status(500).send('Internal Server Error');
    } 
    if (stderr) {
      console.error(`stderr: ${stderr}`);
      return res.status(500).send('Internal Server Error');
    }
    res.status(200).send(stdout);
  });
});

app.listen(port, () => {
  console.log(`App listening at http://localhost:${port}`);
});

/*"""DELIMITER
A platform that connects freelance tutors with students looking for extra academic support in various subjects.